<!DOCTYPE html>
<title>Sudoku Builder | colinfjw</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="This sudoku solving algorithm I hope shows off my ability to build and design good data structures and algorithms. I hope to walk you through my thought proc...">
<meta name="author" content="Colin Walker">
<meta name="generator" content="Jekyll v3.8.5">
<link rel="canonical" href="http://localhost:4000/sudoku-solver/">
<link rel="stylesheet" href="/assets/css/index.css">
<link rel="stylesheet" href="/assets/css/classes.css">
<link rel="stylesheet" href="/assets/css/contrast.css">
<link rel="alternate" type="application/atom+xml" href="/feed.xml" title="colinfjw" />




<body class="light">

<header>
  <h1><a href="/">colinfjw</a></h1>
  
  <nav><a class="icon" href="mailto:colinwalker270@gmail.com"><svg><use xlink:href="/assets/fontawesome/icons.svg#envelope"></use></svg></a><a class="icon" href="https://www.twitter.com/colinjfw"><svg><use xlink:href="/assets/fontawesome/icons.svg#twitter"></use></svg></a><a class="icon" href="https://github.com/coldog"><svg><use xlink:href="/assets/fontawesome/icons.svg#github"></use></svg></a><a class="icon" href="/reading"><svg><use xlink:href="/assets/fontawesome/icons.svg#book"></use></svg></a><a class="icon" href="feed.xml"><svg><use xlink:href="/assets/fontawesome/icons.svg#rss"></use></svg></a></nav>
</header>

<article>
  <header><h1><a href="/sudoku-solver/">Sudoku Builder</a></h1>
    <time datetime="2015-04-16T00:00:00-07:00">April 16, 2015</time>
  </header>
<p>This sudoku solving algorithm I hope shows off my ability to build and design good data structures and algorithms. I hope to walk you through my thought process and design.</p>

<p>Overall, the algorithm is simple to describe. First, build an array of numbers from 1 to 9 that are not in the current squares row, column or grid. If this array has at least one number in it, insert this number into the square and repeat the process for the next square. If the array is empty, meaning there are no possible solutions to this puzzle, move back a square, delete the number in this square and try again. One key part of this is having a duplicate data structure to handle the already tried values, making sure that we don’t simply jump back and forth between squares with the same two numbers.</p>

<h3 id="the-code">The Code</h3>

<p>The Puzzle contains a three dimensional array that looks almost like a sudoku puzzle is normally displayed, with each grid being fenced in by brackets. This is to easily find the values of the grid that the current sudoku is in without the use of many different loops.</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span>
  <span class="p">[</span> <span class="p">[</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[]</span> <span class="p">],</span> <span class="p">[</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[]</span> <span class="p">],</span> <span class="p">[</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[]</span> <span class="p">]</span> <span class="p">],</span>
  <span class="p">[</span> <span class="p">[</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[]</span> <span class="p">],</span> <span class="p">[</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[]</span> <span class="p">],</span> <span class="p">[</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[]</span> <span class="p">]</span> <span class="p">],</span>
  <span class="p">[</span> <span class="p">[</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[]</span> <span class="p">],</span> <span class="p">[</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[]</span> <span class="p">],</span> <span class="p">[</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[]</span> <span class="p">]</span> <span class="p">],</span>
  <span class="p">[</span> <span class="p">[</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[]</span> <span class="p">],</span> <span class="p">[</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[]</span> <span class="p">],</span> <span class="p">[</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[]</span> <span class="p">]</span> <span class="p">],</span>
  <span class="p">[</span> <span class="p">[</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[]</span> <span class="p">],</span> <span class="p">[</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[]</span> <span class="p">],</span> <span class="p">[</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[]</span> <span class="p">]</span> <span class="p">],</span>
  <span class="p">[</span> <span class="p">[</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[]</span> <span class="p">],</span> <span class="p">[</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[]</span> <span class="p">],</span> <span class="p">[</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[]</span> <span class="p">]</span> <span class="p">],</span>
  <span class="p">[</span> <span class="p">[</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[]</span> <span class="p">],</span> <span class="p">[</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[]</span> <span class="p">],</span> <span class="p">[</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[]</span> <span class="p">]</span> <span class="p">],</span>
  <span class="p">[</span> <span class="p">[</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[]</span> <span class="p">],</span> <span class="p">[</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[]</span> <span class="p">],</span> <span class="p">[</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[]</span> <span class="p">]</span> <span class="p">],</span>
  <span class="p">[</span> <span class="p">[</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[]</span> <span class="p">],</span> <span class="p">[</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[]</span> <span class="p">],</span> <span class="p">[</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[]</span> <span class="p">]</span> <span class="p">],</span>
<span class="p">]</span>
</code></pre></div></div>

<p>Each value is represented with an empty array, this is an easy way of translating between the previously used sudoku puzzles and the current one that has empty values. This allows us to easily call an increment and de-increment functions to easily move up and down the puzzle.</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">increment</span>
  <span class="n">r</span> <span class="o">=</span> <span class="vi">@loc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">;</span> <span class="n">g</span> <span class="o">=</span> <span class="vi">@loc</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">;</span> <span class="n">c</span> <span class="o">=</span> <span class="vi">@loc</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
  <span class="k">if</span> <span class="n">g</span> <span class="o">==</span> <span class="mi">2</span> <span class="o">&amp;&amp;</span> <span class="n">c</span> <span class="o">==</span> <span class="mi">2</span>
    <span class="c1"># increment row</span>
    <span class="vi">@loc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="vi">@loc</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="vi">@loc</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
  <span class="k">elsif</span> <span class="n">c</span> <span class="o">==</span> <span class="mi">2</span> <span class="o">&amp;&amp;</span> <span class="n">g</span> <span class="o">&lt;</span> <span class="mi">3</span>
    <span class="c1"># increment grid</span>
    <span class="vi">@loc</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="vi">@loc</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
  <span class="k">elsif</span> <span class="n">c</span> <span class="o">&lt;</span> <span class="mi">2</span>
    <span class="c1"># increment column</span>
    <span class="vi">@loc</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="k">def</span> <span class="nf">de_increment</span>
  <span class="n">r</span> <span class="o">=</span> <span class="vi">@loc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">;</span> <span class="n">g</span> <span class="o">=</span> <span class="vi">@loc</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">;</span> <span class="n">c</span> <span class="o">=</span> <span class="vi">@loc</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
  <span class="k">if</span> <span class="n">r</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">g</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">c</span> <span class="o">==</span> <span class="mi">0</span>
    <span class="c1"># reset everything</span>
    <span class="vi">@res</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="n">reset</span>
  <span class="k">elsif</span> <span class="n">c</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">g</span> <span class="o">==</span> <span class="mi">0</span>
    <span class="c1"># de increment row</span>
    <span class="vi">@loc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-=</span> <span class="mi">1</span>
    <span class="vi">@loc</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="vi">@loc</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mi">2</span>
  <span class="k">elsif</span> <span class="n">c</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">r</span> <span class="o">&gt;=</span> <span class="mi">0</span>
    <span class="c1"># de increment grid</span>
    <span class="vi">@loc</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-=</span> <span class="mi">1</span>
    <span class="vi">@loc</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mi">2</span>
  <span class="k">elsif</span> <span class="n">c</span> <span class="o">&gt;</span> <span class="mi">0</span>
    <span class="c1"># de increment column</span>
    <span class="vi">@loc</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-=</span> <span class="mi">1</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>

<p>Once we have these methods, we only need to get the current column, row and grid of the square that we are in. These are as follows.</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">row</span>
  <span class="vi">@sud</span><span class="p">[</span><span class="vi">@loc</span><span class="p">[</span><span class="mi">0</span><span class="p">]].</span><span class="nf">flatten</span>
<span class="k">end</span>

<span class="k">def</span> <span class="nf">column</span>
  <span class="n">c</span> <span class="o">=</span> <span class="vi">@loc</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="p">;</span> <span class="n">g</span> <span class="o">=</span> <span class="vi">@loc</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
  <span class="n">cols</span> <span class="o">=</span> <span class="p">[]</span>
  <span class="vi">@sud</span><span class="p">.</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">row</span><span class="o">|</span>
    <span class="n">cols</span> <span class="o">&lt;&lt;</span> <span class="n">row</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">c</span><span class="p">]</span>
  <span class="k">end</span>
  <span class="n">cols</span><span class="p">.</span><span class="nf">flatten</span>
<span class="k">end</span>

<span class="k">def</span> <span class="nf">grid</span>
  <span class="n">g</span> <span class="o">=</span> <span class="vi">@loc</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">;</span> <span class="n">r</span> <span class="o">=</span> <span class="vi">@loc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">;</span> <span class="n">grids</span> <span class="o">=</span> <span class="p">[]</span>
  <span class="k">if</span> <span class="n">r</span> <span class="o">&lt;=</span> <span class="mi">2</span>
    <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
  <span class="k">elsif</span> <span class="n">r</span> <span class="o">&lt;=</span> <span class="mi">5</span> <span class="o">&amp;&amp;</span> <span class="n">r</span> <span class="o">&gt;</span> <span class="mi">2</span>
    <span class="n">i</span> <span class="o">=</span> <span class="mi">3</span>
  <span class="k">elsif</span> <span class="n">r</span> <span class="o">&lt;=</span> <span class="mi">8</span> <span class="o">&amp;&amp;</span> <span class="n">r</span> <span class="o">&gt;</span> <span class="mi">5</span>
    <span class="n">i</span> <span class="o">=</span> <span class="mi">6</span>
  <span class="k">end</span>
  <span class="mi">3</span><span class="p">.</span><span class="nf">times</span> <span class="k">do</span>
    <span class="n">grids</span> <span class="o">&lt;&lt;</span> <span class="vi">@sud</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">g</span><span class="p">]</span>
    <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
  <span class="k">end</span>
 <span class="n">grids</span><span class="p">.</span><span class="nf">flatten</span>
<span class="k">end</span>
</code></pre></div></div>

<p>As you can see, the row method is much simpler, while the grid method still involves a loop, which I would like to get out of. This means the data structure is essentially complete, and we can now easily create the solving and building algorithm. This is made simple with the good data structure that we have in place. Note that @loc is the current location that we are at, which consists of three variables corresponding to each part of the three dimensional sudoku array.</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">solve</span>
  <span class="vi">@loc</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span> <span class="p">;</span> <span class="vi">@tot</span> <span class="o">=</span> <span class="mi">0</span> <span class="p">;</span> <span class="vi">@res</span> <span class="o">=</span> <span class="mi">0</span> <span class="p">;</span> <span class="n">up</span> <span class="o">=</span> <span class="kp">true</span>
  <span class="kp">loop</span> <span class="k">do</span>
    <span class="k">return</span> <span class="vi">@sud</span> <span class="k">if</span> <span class="vi">@loc</span> <span class="o">==</span> <span class="p">[</span><span class="mi">9</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">value</span><span class="p">.</span><span class="nf">class</span> <span class="o">==</span> <span class="no">Fixnum</span>
      <span class="k">if</span> <span class="n">up</span> <span class="o">==</span> <span class="kp">true</span>
        <span class="n">increment</span>
      <span class="k">elsif</span> <span class="n">up</span> <span class="o">==</span> <span class="kp">false</span>
        <span class="n">de_increment</span>
      <span class="k">end</span>
    <span class="k">else</span>
      <span class="n">poss</span> <span class="o">=</span> <span class="n">get_possibilities</span>
      <span class="k">if</span> <span class="o">!</span><span class="n">poss</span><span class="p">.</span><span class="nf">empty?</span>
        <span class="n">write</span><span class="p">(</span><span class="n">poss</span><span class="p">.</span><span class="nf">sample</span><span class="p">)</span>
        <span class="n">increment</span> <span class="p">;</span> <span class="n">up</span> <span class="o">=</span> <span class="kp">true</span>
      <span class="k">else</span>
        <span class="n">de_increment</span> <span class="p">;</span> <span class="n">up</span> <span class="o">=</span> <span class="kp">false</span>
      <span class="k">end</span>
    <span class="k">end</span>
    <span class="vi">@tot</span> <span class="o">+=</span> <span class="mi">1</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>

  
  
</article>


<footer>
  <a class="gray" href="/fitbit-analyzer/">« Fitbit Analyzer</a>
  <span></span>
</footer>




</body>
